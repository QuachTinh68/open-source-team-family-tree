<!DOCTYPE html>
<html lang="vn" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<!-- Main Head -->
<head th:replace="fragments :: client_head(${pageTitle}, 'none')"></head>
<body>
	<div id="wrapper">
		<!-- page preloader begin -->
		<div id="de-loader"></div>
		<!-- page preloader close -->
		<!-- header begin -->
		<header th:replace="common/headerLD :: headerLD"></header>
		<!-- header close -->
		<!-- content begin -->
		<div class="no-bottom no-top" id="content">
			<div id="top"></div>
			<!-- section begin -->
			<section id="subheader" class="jarallax">
				<img src="/client/images/background/subheader.jpg"
					class="jarallax-img" alt="">
				<div class="center-y relative text-center">
					<div class="container">
						<div class="row">
							<div class="col-md-12 text-center">
								<h1>Tài khoản của tôi</h1>
							</div>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
			</section>
			<!-- section close -->
			<section aria-label="section">
				<div class="container">
					<div class="row g-custom-x">
						<!-- .card -->
						<div class="d-flex">
							<div class="card" style="width: 80%">
								<div class="top-card">
									<img th:src="@{${user.photosImagePath}}"
										class="card-img-top img-user" alt="...">
								</div>
								<div class="card-body">
									<h5 class="card-title">[[${user.name}]]</h5>
									<p class="card-text">[[${user.email}]]</p>
								</div>
								<ul class="list-group list-group-flush">
									<li class="list-group-item">Số điện thoại: [[${user.phone}]]</li>
									<li class="list-group-item">Ngày sinh: [[${user.birthDay}]]</li>
									<li class="list-group-item">Địa chỉ: [[${user.adress}]]</li>
									<li class="list-group-item">Giới tính: [[${user.genderFomat}]]</li>
								</ul>
								<div class="card-body">
									<a href="#" data-bs-toggle="modal" data-bs-target="#profile-edit" class="card-link">Thay đổi thông tin cá nhân</a> 
									<a th:href="@{/api/change_pass/}" class="card-link">Đổi mật khẩu</a>
								</div>
							</div>
						</div>
						<!-- .card -->
						
					</div>
				</div>
			</section>
		</div>
		<!-- content close -->
		<a href="#" id="back-to-top"></a>
		<!-- footer begin -->
		<footer th:replace="common/footerLD :: footerLD"></footer>
		<!-- footer close -->
    <div class="modal fade" role="dialog" id="profile-edit">
        <div class="modal-dialog modal-dialog-centered modal-lg modal-xxl" role="document">
            <div class="modal-content">
                <a href="#" class="close" data-bs-dismiss="modal"><em class="icon ni ni-cross-sm"></em></a>
                <div class="modal-body modal-body-lg">
                    <h5 class="title">Cập nhật thông tin</h5>
                    <ul class="nk-nav nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#personal">Thông tin cơ bản</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#address">Hình ảnh & địa chỉ</a>
                        </li>
                    </ul><!-- .nav-tabs -->
						<form th:action="@{/api/acount}" method="post"
							enctype="multipart/form-data" th:object="${user}">
							<input type="hidden" th:field="*{id}" />
							<input type="hidden" th:field="*{userName}" />
							<div class="tab-content">
								<div class="tab-pane active" id="personal">
									<div class="row gy-4">
										<div class="col-md-6">
											<div class="form-group">
												<label class="form-label" for="name">Họ tên</label>
												<input type="text" class="form-control form-control-lg" th:field="*{name}"placeholder="Nhập tên">
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label class="form-label" for="email">Email</label> 
												<input type="text" class="form-control form-control-lg" th:field="*{email}" readonly="readonly" disabled="disabled">
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label class="form-label" for="phone">Số điện thoại</label> 
												<input type="text" class="form-control form-control-lg" th:field="*{phone}"placeholder="Nhập sdt">
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label class="form-label" for="birthDay">Ngày sinh</label> 
												<input type="text" class="form-control form-control-lg date" th:field="*{birthDay}">
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label class="form-label" for="gender">Giới tính</label> 
												<select class="form-select js-select2" th:field="*{gender}">
													<option value="M" th:selected="(${gender} == M)">Nam</option>
													<option value="F" th:selected="(${gender} == F)">Nữ</option>
												</select>
											</div>
										</div>
									</div>
								</div>
								<!-- .tab-pane -->
								<div class="tab-pane" id="address">
									<div class="row gy-4">
										<div class="col-md-12">
											<div id="myfileupload">
												<img id="thumbnail" alt="ảnh đại diện" class="img-fluid"
													width="200px" th:src="@{${user.photosImagePath}}"> 
												<input type="file" id="fileImage" name="fileImage" onchange="checkFileSize(this)"
													th:required="${user.photosImagePath == null}" accept="image/png , image/jpeg" /> 
												<input type="hidden" th:field="*{fileName}" />
											</div>
										</div>
										<div class="col-md-12">
											<div class="form-group">
												<label class="form-label" for="adress">Địa chỉ</label> 
												<input type="text" class="form-control form-control-lg" th:field="*{adress}">
											</div>
										</div>
										
									</div>
								</div>
								<!-- .tab-pane -->
								<div class="form-group pt-5 text-center">
									<button type="submit" class="btn btn-lg btn-primary">Lưu</button>
									<a href="#" id="cancelButton" class="btn btn-lg btn-warning"
										data-bs-dismiss="modal">Hủy</a>
								</div>
							</div>
							<!-- .tab-content -->
						</form>
					</div><!-- .modal-body -->
            </div><!-- .modal-content -->
        </div><!-- .modal-dialog -->
    </div><!-- .modal -->
	</div>
	<!-- JavaScript -->
	<script th:src="@{/client/js/plugins.js}"></script>
	<script th:src="@{/client/js/designesia.js}"></script>
	<script th:src="@{/js/commom-form.js}"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.16/dist/sweetalert2.all.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
	<script type="text/javascript">
		moduleURL = "[[@{/api/acount}]]";
		MAX_FILE_SIZE = 10485760;
		defaultImageThumbnailSrc = "[[@{/images/default-image.jpg}]]";

		$(".date").datepicker({
			format : 'dd-mm-yyyy'
		});

		message = '[[${message}]]';

		if (message !== null && message.trim() !== '') {
			Swal.fire('Thành công', message, 'success');
		}
		
	</script>
</body>

</html>